DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'OazachaosuRepository.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201704220846515_Start'
BEGIN
    CREATE TABLE [dbo].[ArticleCategory] (
        [Id] [int] NOT NULL IDENTITY,
        [ArticleId] [int] NOT NULL,
        [CategoryId] [smallint] NOT NULL,
        CONSTRAINT [PK_dbo.ArticleCategory] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[ArticleComment] (
        [Id] [int] NOT NULL IDENTITY,
        [ArticleId] [int] NOT NULL,
        [UserName] [nvarchar](32),
        [Content] [nvarchar](512),
        [DateTime] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.ArticleComment] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Article] (
        [Id] [int] NOT NULL IDENTITY,
        [Title] [nvarchar](64),
        [Abstract] [nvarchar](512),
        [ContentUrl] [nvarchar](64),
        [DateTime] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.Article] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Category] (
        [Id] [smallint] NOT NULL IDENTITY,
        [Name] [nvarchar](64),
        [Url] [nvarchar](128),
        CONSTRAINT [PK_dbo.Category] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Group] (
        [Id] [bigint] NOT NULL,
        [UserId] [bigint] NOT NULL,
        [Name] [nvarchar](64),
        [Language1] [tinyint] NOT NULL,
        [Language2] [tinyint] NOT NULL,
        [State] [tinyint] NOT NULL,
        [LastUpdateTime] [datetime],
        CONSTRAINT [PK_dbo.Group] PRIMARY KEY ([Id], [UserId])
    )
    CREATE TABLE [dbo].[Result] (
        [Id] [bigint] NOT NULL,
        [UserId] [bigint] NOT NULL,
        [GroupId] [bigint] NOT NULL,
        [Correct] [smallint] NOT NULL,
        [Accepted] [smallint] NOT NULL,
        [Wrong] [smallint] NOT NULL,
        [Invisibilities] [smallint] NOT NULL,
        [TimeCount] [smallint] NOT NULL,
        [TranslationDirection] [tinyint] NOT NULL,
        [LessonType] [tinyint] NOT NULL,
        [DateTime] [datetime] NOT NULL,
        [State] [tinyint] NOT NULL,
        [LastUpdateTime] [datetime],
        CONSTRAINT [PK_dbo.Result] PRIMARY KEY ([Id], [UserId])
    )
    CREATE TABLE [dbo].[AspNetRoles] (
        [Id] [nvarchar](128) NOT NULL,
        [Name] [nvarchar](256) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetRoles] PRIMARY KEY ([Id])
    )
    CREATE UNIQUE INDEX [RoleNameIndex] ON [dbo].[AspNetRoles]([Name])
    CREATE TABLE [dbo].[AspNetUserRoles] (
        [UserId] [nvarchar](128) NOT NULL,
        [RoleId] [nvarchar](128) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserRoles]([UserId])
    CREATE INDEX [IX_RoleId] ON [dbo].[AspNetUserRoles]([RoleId])
    CREATE TABLE [dbo].[AspNetUsers] (
        [Id] [nvarchar](128) NOT NULL,
        [LocalId] [bigint] NOT NULL,
        [Name] [nvarchar](32),
        [Password] [nvarchar](32),
        [ApiKey] [nvarchar](32),
        [IsAdmin] [bit] NOT NULL,
        [CreateDateTime] [datetime] NOT NULL,
        [LastLoginDateTime] [datetime] NOT NULL,
        [State] [tinyint] NOT NULL,
        [Email] [nvarchar](256),
        [EmailConfirmed] [bit] NOT NULL,
        [PasswordHash] [nvarchar](max),
        [SecurityStamp] [nvarchar](max),
        [PhoneNumber] [nvarchar](max),
        [PhoneNumberConfirmed] [bit] NOT NULL,
        [TwoFactorEnabled] [bit] NOT NULL,
        [LockoutEndDateUtc] [datetime],
        [LockoutEnabled] [bit] NOT NULL,
        [AccessFailedCount] [int] NOT NULL,
        [UserName] [nvarchar](256) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUsers] PRIMARY KEY ([Id])
    )
    CREATE UNIQUE INDEX [UserNameIndex] ON [dbo].[AspNetUsers]([UserName])
    CREATE TABLE [dbo].[AspNetUserClaims] (
        [Id] [int] NOT NULL IDENTITY,
        [UserId] [nvarchar](128) NOT NULL,
        [ClaimType] [nvarchar](max),
        [ClaimValue] [nvarchar](max),
        CONSTRAINT [PK_dbo.AspNetUserClaims] PRIMARY KEY ([Id])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserClaims]([UserId])
    CREATE TABLE [dbo].[AspNetUserLogins] (
        [LoginProvider] [nvarchar](128) NOT NULL,
        [ProviderKey] [nvarchar](128) NOT NULL,
        [UserId] [nvarchar](128) NOT NULL,
        CONSTRAINT [PK_dbo.AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey], [UserId])
    )
    CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserLogins]([UserId])
    CREATE TABLE [dbo].[Word] (
        [Id] [bigint] NOT NULL,
        [UserId] [bigint] NOT NULL,
        [GroupId] [bigint] NOT NULL,
        [Language1] [nvarchar](128),
        [Language2] [nvarchar](128),
        [Drawer] [tinyint] NOT NULL,
        [Language1Comment] [nvarchar](128),
        [Language2Comment] [nvarchar](128),
        [Visible] [bit] NOT NULL,
        [State] [tinyint] NOT NULL,
        [LastUpdateTime] [datetime],
        CONSTRAINT [PK_dbo.Word] PRIMARY KEY ([Id], [UserId])
    )
    ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[AspNetRoles] ([Id])
    ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id])
    ALTER TABLE [dbo].[AspNetUserClaims] ADD CONSTRAINT [FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id])
    ALTER TABLE [dbo].[AspNetUserLogins] ADD CONSTRAINT [FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id])
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201704220846515_Start', N'OazachaosuRepository.Migrations.Configuration',  0x1F8B0800000000000400ED5DDB6EDCBA157D2FD07F10E6A92D7C3CBE246E1AD8E7C019DBE9A07162789C9CBE05F40C3D162251737471EC53F4CBFAD04FEA2F94942889A4484A94288D1C187EF1F0B2785BDCDCBC68EFFFFDE7BFC7BF3CFA9EF300C3C80DD0C9647F776FE240B40C562E5A9F4C92F8EEA737935F7EFEE31F8ECF57FEA3F3254F7748D2E19C283A99DCC7F1E6ED741A2DEFA10FA25DDF5D864114DCC5BBCBC09F8255303DD8DBFBDB747F7F0A31C4046339CEF1758262D787E90FFC7316A025DCC409F02E8315F4221A8E631629AAF311F830DA80253C997C02BF83E53D08A2E41A6E82C88D83F06937CD36714E3D17E01A2DA07737710042410C625CDFB79F23B888C300AD171B1C00BC9BA70DC4E9EE801741DA8EB765F2A64DDA3B204D9A961973A86512C5816F08B87F48FB682A666FD5D393A20F712F9EE3DE8E9F48ABD39E3C999C86B1BBF4E00CC4708DFB6FE28865BE9D792149AFEBEF5D0165C791A5DD295883C945FE769C59E2C549084F104CE210783BCE5572EBB9CB7FC0A79BE01B442728F13CB6FEB805388E0BC0415761B08161FC740DEF68ABE6AB8933E5F34DC58C4536264FD6D0398A0F0F26CE475C38B8F560410FA65316B841F03D4430C44D5E5D81388621221830EDE04AE94259B4BFEA8BD4C3E4FDCDE1EC1FD5E01C4F4B1634E246E0FBB8591DA99181BC3063186660391792FF72142CF4B01C9F3897E0F10344EBF81E4B6E8C7AE13EC2551E40813F23174B7D9C270E937A0606284EB9A12CE6F5BE8D72CE7067DEB8657BCADF56A9DE8DE32FE4AE19C51B37F674943C7A65812AA7B711EED465FF9CA4DCFF1C7A7D37A96FF6775CFD7F9C655FBA76DAE37F8D44B6C2153D1DF70FDE1897D19846EFC320D9B4E4509A778404922623AB6B67AE91D16EB1AA77C51882831F005A27600DF78B82F03E6C370F35AE729EF1C00EDC02D312725034C4B85A51FC79B352CAE65673E81A4698DB2D275196F96516F53F8B5271D515641684212C1595267B3789BAB3240726D068075845F9959C89748398A30737726F5DCF8D5D1875C32213681624A863DFDC8400455E3A7FCE5CD2D5E9190A33F1E5094CE5008CA20011545E3E31C186882DF5BD6726EA72ADE93AD06FBC2E8BD3ADD368F311C6BB79C6DD0CF222C470DF83F0DB2E8BB8E334CE578AC683A6A2F170FFF6EEF0CDEB23B03A3C7A050F5F0FAFAD7650EEEC6A0C07AF8FAC94FA113CB8EB74E825F21ACB936B984DD4E8DEDD5032B3E3FD9526BB08039FFCE6F995C57E5D0449B8248D0994496E40B88671474A1328FBB4CE51C74F6DF9D22E4D4A1AD46626F0ABF870B321AF6FBFE536661CE98696DA22C93A425D719C42F043B0045ECF7B2F2B27B257208AF0CCD7759195724E372E1EA7BE4B9947A72BDF2D94B677019E7DC05C459B8510EB2AD6D42AA20E7D08D62E1A9DA276EE035777FED374B16E50CA2C40776EE8973B8FB6839333F6EF20BAD7541DFF6BA1EA0BB84C422C4271F7FA9BDE4BBBBA0F10FC98F8B744480F5796B5A1B9F91E5C80255E12CE11C9D5190F4BD16F41129FA31599299FE3A57E2BA101B0521DB2778EA20B4C66B812B79BFD5CBAF5AE2CCF3CE0FA726D9954EF6B1E5FAAC94C70453F66E3648AB1AE26A980D4D4248F176A9205CB6B42E34C6B42103415A1D1423DD2507935B2286B1B85B47FEDEF1452D8F16F15C67E67B9AD7D463A7CDCA1525F0B475AD217E025B68B6A351BD2396E7F36A4B0E39F0D693571F083BB222A4383FD739E3855C67B3C75176A36F474E09A3974E1C3C880C6D3E5D7747BD76ACF4FB28E70CFFF723F249D72956B543B17FA4D6E58FB2AE92C04DF4BF9F1EEA9D56504ED96E261E250BD3354815FC8455AF952AAEDF6665CB73F89CF88B0F2F27E1E5D78605DBEC1568B35519845BB04342A1E02EC38DDA5191E27BCC8784F785C1986F2BD7309C91E3B1716E81B0ABEE3B14915A893C95EA533B9E4E768EDB9E4988326DFD727BF0AB8D407FAD4EF61883BEEA9487EA84F7E1142B42CC15FE9532F3600B175795D57F330C68382374AB0C872A4CF729D44910BCAAEFCAB3EF93C061E9BFC4D958819E53434A4F3A13B0753A0AD11F07BD098806701824DD9374778258C9BB22F93104DC977063DC8A47ED562F0E497F75DC65286B89541256711176E18C54D87956458C0658056AAC16DD4A5EC9B050B82B9407B0EA2198362E8ACCE4D67C8851BFDFECD15F2D4CC933979351CB90F50C856336166F781BB14F3D4C8EC6B8056812FE4A911DCEF60140B398E9A30E9146759BA293324EF3BE8ED3C5FEE395A39F557F5A5F6C23F18B9C4A471379826384436505AF4FCF04E825EDEDDF325FCA55202DEAAC0906402E43284BC3A77515CDDD7B868E96E8057DB542167F3ADD3B428438C39831B884881B53DD1A470F9553DA940518EB055ABEBA1E329431B3D9BD8D36BD5404B8FB2CB11CEEECA9BF34676FAAD200C3DC3ED853192560D401549E39B94AA7CF9311847E8BD827650C54B868E1C11EE25141CA1279BFD71846FD5501CE11BFF3C38925DF968C754B8FFE9C810FECA68F855A7DAA4A1E8C1B57C64ECC88E2AC8775C3847A101A54F7DCE6ED3CFBB1E654FF1710DA9EE1BD1F31C71EC09EC02C6F93533F77574FA38BA3C24A13CA87C875DE1931C333B91D221E66756CD003548B510DA06366E597A742A43A09F17D564CFBE8190E5CF3FADA80308E4BDC06B9F3520E2B4D6019653BF0694BE70AD006512C9A046F923006D95A84A63009BDFE86B61E92A58034BEE296448D9D587909999DDD58AB16F839984EA17C4A2D869B44B29EA5FF0A722BE1AED47181C0985C49B10BEE10D3A857B0252ED0DA58E5DAB6533F5A67DAD69BF4CAF56343CAFAB9D96E70455B45CA639D6EA8EE62D17B44545CBF3BADA69392590A2E11275A84E21326F36AF0259227A7EDD50ACE145DCF134B31843038EA70AD332C79760430E7E18533334C459647666663F2DCC0DAFF819C674C9F5ABA8711425C54108D65088255F88AD607A0E780662700BC831DC6CE55792091A8B42B4E685A99492EAF8E5C237CF49FECF7237B70523D1F928DC056E32514DD2D6438610B5080E3107043C104A6E7E678197F848ADBFAA7333A637581026B839166B99850563C3AB68C753A16B2A2A70654C8489220EB61115725DD23211A802DA9E072A80F1D3A07C11CA4295A10684CA0DAD706CCA039BE394B7B62C90EAF96D46AA6D92D2361BDBD37028FE5123292C000D32E070610385A370116ACCBBD4AA84847A69F80FC83EFBCB6287F570E885B02AB14CA555852E0A9E6C6974E91183A591CDCE25CC875591AF9F31CD4FD5C475686866306FDA581826D81CEB408E55B987D561D197202C0E0D32A90FFF4E8AAF141F379AB9909F97599A0CF490CD7C36A8328E793A14AF3C599822D06491A58640F81596061A2CFB852D106ED92F429B23517B202C0C0D6A8E211A04E1464B8833518F0AD320BC8A54041B60495F1071B0D2140622817950C3890326BC4FF5E945DC89E24E71D4D54AD8715702E6224F9F7DDBBADD9606A87A1A6879B08AEB96F603A686E877BDC91FE0B028AA47395B1B40D52D4AAB414BAFB6CC074A9EAD9F19555886E0E45F1E38A46E5D9A7E6051CA500345821A77E0D4081A66A000E4C61BB8CECD030DD423C17A03A725097166CB9760C4415CC184E86197576ACA81C5A04186188C35800A181367CEB3CC60838C6B598C417FF15619B87EE3A30C6AC9DA5EE02AC946B4C253F4A83C85813A5AB1B6C0A9A29558231925DA5D10A49518DD025B526731CE6C2B23986610F73442749FA7F223D08594D7F29D95A1ECA147376D488131E6CD3BF3813DB7A094C18658F413FA0A180D1F25AB944F1E3AB32A7BE7D38D550A0CB524E23E51E70591F6BB7A3526F7DD3927EC75DFDDABF1CCB8BB258664AFAF2C91227DB265CE0379B6310B145BA781633D22CF3FDDE6CE9E68588BD6150F53A58D543C5B6DD4562DF2410BE4E27B6C16B0087C39751322C5E74D4592A2741A52FC2E1E63D18750F5CEBF2A2FA3B224132797CBB86B9FA218FABB24C1EEE2376FE6B9E9B0E7092E0172EF6014679F184E0EF6885310CE6FD8787C784DA368C599DAA877E4C50FDB00A6985CD2B9B5C6964C2DB489EE90D2523ABBC98A7CE079F5506D3D65BDF4BDD2261E7A00215614C28AA9D012B785DF29296AEAE5C70C56B4E7494469DC839BA91F832037AC3B27E910F0466FDA786FB235B255674D962ADC3765B627D04B21699B38B502C17C18EA063635CCA38334F472646534A4C9BA9BBDBA75D76D457567901E86B662062B76D1539BBA55AC5CB505E20C2BB5AF8DCCAA924C7C7420ABEC55CD0B5B5566DA5AA2087E7C1A2A9792B54F70E5D31A88F3E6D31A45EED0A7355CC5A74F7B248D5B9FD6B3B1E2C4A72D524B85E0394B19F5439621F49426EB7D87B5ABF2F9F71CADE0E3C9E45F69AEB7E9276EE4BF3478C799479F91FB5B82236E70873AFFAE9AFFB6A317EADFA28CD44D4BF35E9DFFF36B9675C7F914AE60F8D6D913FAB2CD08F3CE5B8C6A9365ED501B33972ECF7716099E52FAD223CDCF0C44CF289660794728964005BF27B76E0BAD44EAF3A4F56AA4F479B2DDF58D737822ED7C41E6B6F76FD2661064BE4DF25AFEC9078F7F36AD9AD47F492744898F125B7856BA50E583A40D96D2FF4833854803D8B96A4A5F24764F5DEB56BA3CE716B519C95B92677B443A2EF5A7E253A2D344AFFA8D3080EBE01BA205339E995B056BBAD855D56B8235EC6D52DBCC55C2CBE9971CC4CEE957E578B6DDF97B83E35A5BC0BC0F82AEA7C9A21B02EBCDEF095F7032D0466719ED09953563C456ED0F9786DE24A0039A1D1ED2D2B0E66BABA6874CCEB80C0C7732062A31B0A7E042DF1685872681EA95B9C1A9E4984C085B6301B587A86041DF3683876681EA55F81859506F24D81A09B6B52A6C83028D5783AD1B02AE5ADF13C7923E85553CC16C60E5377BB58AD59DDB008F7FA6E6743305DCC012B0AE50336BC13A63C19A526AE1355DA8EF3B332BC36A23C3326C13FBC31AF3C332E886A6897905B452021F2DEDFFD4E9A5DCC8A6AAB05204290B2C93A80B555BF7140BCE0469A5B02C585F8059ABA88AA56D164DA32F5661A55657365DD8B565D334FAB2157662C5B233C3C995E2B2605909A3B1B42CB5152BB3975DB3BA4A509496B7B76859B9625AB77133393A2BBED0B4D4501B8694DB37949B3B8A8F062D35B4BBDDE4F6CDB4495B033BC9D54F70B0629520721893FD3A8391BB2E218E3126CA1E6195A0799A39BA0B72CD4EA8519E44380EBA843158617D8BA80A776019E3687231963ADAA4FEA8CEFD5BB89AA34F49BC4962DC64E8DF7ADC8A4F34445DF9A93168BECEC79F36A96F781B4DC0D574C9F9D527F42E71BDD223DB85E4205B0141544F7A0D45C63226D751EBD2B3E3C7D48B5F1320DA7D85C67C03FD8D87C1A24F68011E609BBA61FA7D806BB07C2AAF2D5420F503C177FBF1990BD621F0238A51E6C73F318757FEE3CFFF07CE7D957DACA20000 , N'6.1.3-40302')
END

